# API Development Tools for Claude Code v3.6.0

**Interview-driven, research-first API development with 100% phase enforcement**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¯ npx @hustle-together/api-dev-tools --scope=project                        â”‚
â”‚                                                                              â”‚
â”‚  ğŸš€ Installing API Development Tools v3.6.0...                               â”‚
â”‚                                                                              â”‚
â”‚  âœ… Found Python 3.12.0                                                      â”‚
â”‚  ğŸ“¦ Installing commands: 24 slash commands                                   â”‚
â”‚  ğŸ”’ Installing hooks: 18 enforcement hooks                                   â”‚
â”‚  âš™ï¸  Configuring settings.json                                               â”‚
â”‚  ğŸ“Š Creating api-dev-state.json                                              â”‚
â”‚  ğŸ“š Setting up research cache                                                â”‚
â”‚  ğŸ”Œ Configuring MCP servers: context7, github                                â”‚
â”‚                                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚  ğŸ‰ API Development Tools installed successfully!                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                              â”‚
â”‚  Quick Start: /api-create my-endpoint                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## What Problem Does This Solve?

LLMs have predictable failure modes when building APIs:

1. **Wrong Documentation** - Uses training data instead of current docs
2. **Memory-Based Implementation** - Forgets research by implementation time
3. **Self-Answering Questions** - Asks itself questions instead of the user
4. **Context Dilution** - Loses focus in long sessions
5. **Skipped Steps** - Jumps to implementation without proper research

**This package enforces a 12-phase workflow with Python hooks that BLOCK progress until each phase is complete with explicit user approval.**

---

## Complete Workflow Simulation

Here's exactly what happens when you run `/api-create brandfetch`:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¯ /api-create brandfetch                                                    â”‚
â”‚                                                                              â”‚
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 0: DISAMBIGUATION                                                 â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ I found multiple things matching "brandfetch":                          â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚   [A] Brandfetch REST API (api.brandfetch.io)                          â”‚ â”‚
â”‚  â”‚   [B] @brandfetch/sdk npm package                                       â”‚ â”‚
â”‚  â”‚   [C] Brandfetch WordPress plugin                                       â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Which interpretation matches your intent?                               â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-disambiguation.py                               â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks Write/Edit until user selects an option                   â”‚ â”‚
â”‚  â”‚    â”œâ”€ Requires: user_question_asked = true                             â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true (user said "yes")          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User selects: [A] Brandfetch REST API                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 1: SCOPE CONFIRMATION                                             â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ I'll create: /api/v2/brandfetch                                        â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Purpose: Fetch brand assets (logos, colors, fonts) from Brandfetch API â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Is this scope correct? [Yes / No, I need...]                           â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-scope.py                                        â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks until user confirms scope                                 â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes, but also add a logo-only mode"                                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 2: INITIAL RESEARCH                                               â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ” Searching...                                                         â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ [Context7] brandfetch â†’ Found SDK documentation                        â”‚ â”‚
â”‚  â”‚ [WebSearch] "Brandfetch API documentation 2025" â†’ Official docs        â”‚ â”‚
â”‚  â”‚ [WebSearch] "Brandfetch API rate limits" â†’ 5 req/sec                   â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ RESEARCH SUMMARY:                                                       â”‚ â”‚
â”‚  â”‚ â€¢ Base URL: https://api.brandfetch.io/v2                               â”‚ â”‚
â”‚  â”‚ â€¢ Auth: Bearer token (BRANDFETCH_API_KEY)                              â”‚ â”‚
â”‚  â”‚ â€¢ Rate limit: 5 requests/second                                        â”‚ â”‚
â”‚  â”‚ â€¢ Returns: logos, colors, fonts, images                                â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Proceed to interview? [Yes / Search more first]                        â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-research.py                                     â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks Write/Edit until research complete                        â”‚ â”‚
â”‚  â”‚    â”œâ”€ Requires: sources.length >= 2                                    â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ“ TRACKED BY: track-tool-use.py                                        â”‚ â”‚
â”‚  â”‚    â””â”€ Logs all WebSearch/Context7 calls to state                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes, proceed"                                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 3: STRUCTURED INTERVIEW                                           â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Based on research, I have 5 questions:                                  â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Q1: Which response format do you need?                                  â”‚ â”‚
â”‚  â”‚     [ ] JSON only                                                       â”‚ â”‚
â”‚  â”‚     [x] JSON with asset URLs                                            â”‚ â”‚
â”‚  â”‚     [ ] Include raw base64 assets                                       â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Q2: Caching strategy?                                                   â”‚ â”‚
â”‚  â”‚     [ ] No caching                                                      â”‚ â”‚
â”‚  â”‚     [ ] Short (5 minutes)                                               â”‚ â”‚
â”‚  â”‚     [x] Long (24 hours) - brand data rarely changes                     â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Q3: Error handling approach?                                            â”‚ â”‚
â”‚  â”‚     [ ] Throw errors (caller handles)                                   â”‚ â”‚
â”‚  â”‚     [x] Return error objects { success: false, error: {...} }          â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Q4: Rate limit handling?                                                â”‚ â”‚
â”‚  â”‚     [ ] Client handles retry                                            â”‚ â”‚
â”‚  â”‚     [ ] Server-side retry with backoff                                  â”‚ â”‚
â”‚  â”‚     [x] Expose rate limit headers (X-RateLimit-*)                       â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Q5: Which brand assets to include?                                      â”‚ â”‚
â”‚  â”‚     [x] Logos                                                           â”‚ â”‚
â”‚  â”‚     [x] Colors                                                          â”‚ â”‚
â”‚  â”‚     [ ] Fonts                                                           â”‚ â”‚
â”‚  â”‚     [ ] Images                                                          â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Interview complete? [Yes, these answers are final / Modify answers]    â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-interview.py                                    â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks until structured_question_count >= 3                      â”‚ â”‚
â”‚  â”‚    â”œâ”€ Uses AskUserQuestion tool (Claude's built-in dialog)             â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ’¡ LLM RESPONSIBILITY:                                                  â”‚ â”‚
â”‚  â”‚    â””â”€ Generate questions FROM research (not generic templates)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User confirms selections                                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 4: DEEP RESEARCH (Adaptive)                                       â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Based on your selections, I want to research:                           â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ [x] "Brandfetch error response format" - for error objects             â”‚ â”‚
â”‚  â”‚ [x] "Brandfetch rate limit headers" - for X-RateLimit-* headers        â”‚ â”‚
â”‚  â”‚ [ ] "Brandfetch font API" - SKIPPED (you don't need fonts)             â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Approve these searches? [Yes / Add more / Skip all]                    â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-deep-research.py                                â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks if approved_searches not executed                         â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ’¡ LLM RESPONSIBILITY:                                                  â”‚ â”‚
â”‚  â”‚    â””â”€ Propose searches based on interview (not shotgun approach)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes, also add authentication methods"                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 5: SCHEMA CREATION                                                â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Creating Zod schema from research + interview:                          â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ // Request Schema                                                       â”‚ â”‚
â”‚  â”‚ const BrandfetchRequest = z.object({                                   â”‚ â”‚
â”‚  â”‚   domain: z.string().min(1),                                           â”‚ â”‚
â”‚  â”‚   mode: z.enum(["full", "logo-only"]).default("full"),                 â”‚ â”‚
â”‚  â”‚   include: z.object({                                                  â”‚ â”‚
â”‚  â”‚     logos: z.boolean().default(true),                                  â”‚ â”‚
â”‚  â”‚     colors: z.boolean().default(true),                                 â”‚ â”‚
â”‚  â”‚   }).optional(),                                                       â”‚ â”‚
â”‚  â”‚ });                                                                    â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ // Response Schema (success)                                            â”‚ â”‚
â”‚  â”‚ const BrandfetchResponse = z.object({                                  â”‚ â”‚
â”‚  â”‚   success: z.literal(true),                                            â”‚ â”‚
â”‚  â”‚   data: z.object({                                                     â”‚ â”‚
â”‚  â”‚     logos: z.array(LogoSchema),                                        â”‚ â”‚
â”‚  â”‚     colors: z.array(ColorSchema),                                      â”‚ â”‚
â”‚  â”‚   }),                                                                  â”‚ â”‚
â”‚  â”‚   cached: z.boolean(),                                                 â”‚ â”‚
â”‚  â”‚ });                                                                    â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Schema matches your interview answers? [Yes / Modify]                  â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-schema.py                                       â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks if schema not shown to user                               â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes, looks good"                                                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 6: ENVIRONMENT CHECK                                              â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Checking required API keys:                                             â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚   âœ… BRANDFETCH_API_KEY          found in .env                         â”‚ â”‚
â”‚  â”‚   âœ… NODE_ENV                     = development                         â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Ready to begin TDD? [Yes / Need to set up keys first]                  â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-environment.py                                  â”‚ â”‚
â”‚  â”‚    â”œâ”€ Checks env vars based on endpoint name + interview               â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes, ready"                                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 7: TDD RED (Write Failing Tests)                                  â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ TEST MATRIX (from interview decisions):                                 â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ âœ… Success Scenarios:                                                   â”‚ â”‚
â”‚  â”‚    â€¢ GET with valid domain â†’ 200 + brand data                          â”‚ â”‚
â”‚  â”‚    â€¢ mode=logo-only â†’ 200 + logos only                                 â”‚ â”‚
â”‚  â”‚    â€¢ Cache hit â†’ 200 + cached: true                                    â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ âœ… Error Scenarios (your choice: return objects):                       â”‚ â”‚
â”‚  â”‚    â€¢ Invalid domain â†’ 400 + { success: false, error: {...} }           â”‚ â”‚
â”‚  â”‚    â€¢ Missing API key â†’ 401 + error object                              â”‚ â”‚
â”‚  â”‚    â€¢ Not found â†’ 404 + error object                                    â”‚ â”‚
â”‚  â”‚    â€¢ Rate limited â†’ 429 + X-RateLimit-* headers                        â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ âœ… Edge Cases:                                                          â”‚ â”‚
â”‚  â”‚    â€¢ Empty colors array â†’ 200 + empty array (not error)                â”‚ â”‚
â”‚  â”‚    â€¢ Timeout â†’ 504 + error object                                      â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Total: 9 test scenarios                                                 â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Test plan looks good? [Yes, write tests / Add more tests]              â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-tdd-red.py                                      â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks route.ts if no .test.ts exists                            â”‚ â”‚
â”‚  â”‚    â”œâ”€ Requires: test matrix shown to user                              â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ’¡ LLM RESPONSIBILITY:                                                  â”‚ â”‚
â”‚  â”‚    â””â”€ Derive test scenarios from interview decisions                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes, write them"                                                     â”‚
â”‚                                                                              â”‚
â”‚  ğŸ“ Creating: src/app/api/v2/brandfetch/__tests__/route.test.ts            â”‚
â”‚  â³ Running tests... 0/9 passing (expected - RED phase)                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 8: TDD GREEN (Make Tests Pass)                                    â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ“ Creating: src/app/api/v2/brandfetch/route.ts                        â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ â³ Running tests...                                                     â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ âœ… GET with valid domain                    PASS                        â”‚ â”‚
â”‚  â”‚ âœ… mode=logo-only                           PASS                        â”‚ â”‚
â”‚  â”‚ âœ… Cache hit                                PASS                        â”‚ â”‚
â”‚  â”‚ âœ… Invalid domain â†’ 400                     PASS                        â”‚ â”‚
â”‚  â”‚ âœ… Missing API key â†’ 401                    PASS                        â”‚ â”‚
â”‚  â”‚ âœ… Not found â†’ 404                          PASS                        â”‚ â”‚
â”‚  â”‚ âœ… Rate limited â†’ 429                       PASS                        â”‚ â”‚
â”‚  â”‚ âœ… Empty colors array                       PASS                        â”‚ â”‚
â”‚  â”‚ âœ… Timeout â†’ 504                            PASS                        â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Tests: 9/9 passing                                                      â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: verify-after-green.py (PostToolUse on Bash)             â”‚ â”‚
â”‚  â”‚    â”œâ”€ Detects "pnpm test" or "vitest" in command                       â”‚ â”‚
â”‚  â”‚    â”œâ”€ Parses output for pass/fail                                      â”‚ â”‚
â”‚  â”‚    â””â”€ Auto-triggers Phase 9 when all tests pass                        â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ’¡ LLM RESPONSIBILITY:                                                  â”‚ â”‚
â”‚  â”‚    â””â”€ Write minimal implementation to pass tests                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 9: VERIFY (Re-Research After Green)                               â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ âš ï¸  AUTO-TRIGGERED: Tests passed. Now verifying against docs...         â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Re-reading Brandfetch API documentation...                              â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ Feature        â”‚ In Docs â”‚ Implemented â”‚ Status                   â”‚  â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ domain param   â”‚ âœ“       â”‚ âœ“           â”‚ âœ… Match                 â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ logo formats   â”‚ 4       â”‚ 4           â”‚ âœ… Match                 â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ colors         â”‚ âœ“       â”‚ âœ“           â”‚ âœ… Match                 â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ include_fonts  â”‚ âœ“       â”‚ âœ—           â”‚ âš ï¸  GAP FOUND            â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ webhook        â”‚ âœ“       â”‚ âœ—           â”‚ â„¹ï¸  Optional             â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ GAPS FOUND: 1                                                           â”‚ â”‚
â”‚  â”‚   â€¢ include_fonts parameter (documented but not implemented)            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Fix gaps? [Yes, loop back to Phase 7 / Skip - document as omission]    â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-verify.py                                       â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks refactoring until verification complete                   â”‚ â”‚
â”‚  â”‚    â”œâ”€ Requires: gaps_fixed OR documented as omissions                  â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ’¡ LLM RESPONSIBILITY:                                                  â”‚ â”‚
â”‚  â”‚    â””â”€ Re-read docs and compare feature-by-feature                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Skip - I don't need fonts"                                           â”‚
â”‚                                                                              â”‚
â”‚  ğŸ“ Documenting as intentional omission: include_fonts                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 10: TDD REFACTOR                                                  â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Cleaning up implementation while keeping tests green...                 â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ â€¢ Extracted rate limit logic to helper function                         â”‚ â”‚
â”‚  â”‚ â€¢ Added JSDoc comments                                                  â”‚ â”‚
â”‚  â”‚ â€¢ Removed dead code                                                     â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Tests: 9/9 still passing                                                â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Refactoring complete? [Yes / Continue refactoring]                     â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-refactor.py                                     â”‚ â”‚
â”‚  â”‚    â”œâ”€ Only allows after verify phase complete                          â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ’¡ LLM RESPONSIBILITY:                                                  â”‚ â”‚
â”‚  â”‚    â””â”€ Improve code without changing behavior                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes"                                                                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ PHASE 11: DOCUMENTATION                                                 â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ DOCUMENTATION CHECKLIST:                                                â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ âœ… api-tests-manifest.json                                              â”‚ â”‚
â”‚  â”‚    â€¢ Added /api/v2/brandfetch entry                                    â”‚ â”‚
â”‚  â”‚    â€¢ 9 test scenarios documented                                        â”‚ â”‚
â”‚  â”‚    â€¢ Request/response schemas included                                  â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ âœ… Research Cache                                                       â”‚ â”‚
â”‚  â”‚    â€¢ .claude/research/brandfetch/sources.json                          â”‚ â”‚
â”‚  â”‚    â€¢ .claude/research/brandfetch/interview.json                        â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ â­ï¸  OpenAPI Spec (skipped - internal API)                               â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Documentation complete? [Yes / Need to add something]                  â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: enforce-documentation.py                                â”‚ â”‚
â”‚  â”‚    â”œâ”€ Blocks completion until documentation updated                    â”‚ â”‚
â”‚  â”‚    â”œâ”€ Checks: manifest_updated OR research_cached                      â”‚ â”‚
â”‚  â”‚    â””â”€ Requires: phase_exit_confirmed = true                            â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ ğŸ”’ ENFORCED BY: api-workflow-check.py (Stop hook)                       â”‚ â”‚
â”‚  â”‚    â””â”€ Blocks "stop" if required phases not complete                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  User: "Yes, all done"                                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚  â”‚ âœ… WORKFLOW COMPLETE                                                    â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ /api/v2/brandfetch created successfully!                               â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Files created:                                                          â”‚ â”‚
â”‚  â”‚   â€¢ src/app/api/v2/brandfetch/route.ts                                 â”‚ â”‚
â”‚  â”‚   â€¢ src/app/api/v2/brandfetch/__tests__/route.test.ts                  â”‚ â”‚
â”‚  â”‚   â€¢ src/lib/schemas/brandfetch.ts                                      â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Tests: 9/9 passing                                                      â”‚ â”‚
â”‚  â”‚ Coverage: 100%                                                          â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Interview decisions preserved in:                                       â”‚ â”‚
â”‚  â”‚   â€¢ .claude/api-dev-state.json                                         â”‚ â”‚
â”‚  â”‚   â€¢ .claude/research/brandfetch/                                       â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚ Intentional omissions documented:                                       â”‚ â”‚
â”‚  â”‚   â€¢ include_fonts parameter                                            â”‚ â”‚
â”‚  â”‚   â€¢ webhook support                                                     â”‚ â”‚
â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Enforcement vs LLM Responsibility

### ğŸ”’ ENFORCED (Hooks block progress if not complete)

| Phase | Hook File | What It Enforces |
|-------|-----------|------------------|
| 0 | `enforce-disambiguation.py` | User must select from options |
| 1 | `enforce-scope.py` | User must confirm scope |
| 2 | `enforce-research.py` | Minimum 2 sources required |
| 3 | `enforce-interview.py` | Minimum 3 structured questions |
| 4 | `enforce-deep-research.py` | Approved searches must execute |
| 5 | `enforce-schema.py` | Schema must be shown to user |
| 6 | `enforce-environment.py` | API keys must be verified |
| 7 | `enforce-tdd-red.py` | Test file must exist before route |
| 8 | `verify-after-green.py` | Tests must pass (auto-detect) |
| 9 | `enforce-verify.py` | Gaps must be fixed or documented |
| 10 | `enforce-refactor.py` | Verify phase must be complete |
| 11 | `enforce-documentation.py` | Docs must be updated |

### ğŸ’¡ LLM RESPONSIBILITY (Not enforced, but guided)

| Task | Guidance |
|------|----------|
| Generate disambiguation options | Based on search results |
| Create interview questions | FROM research findings |
| Propose deep research searches | Based on interview answers |
| Write test scenarios | Derived from interview decisions |
| Compare docs to implementation | Feature-by-feature comparison |
| Refactor code | Without changing behavior |

### ğŸ”„ AUTOMATIC (No user action required)

| Hook | Trigger | Action |
|------|---------|--------|
| `session-startup.py` | Session start | Inject state context |
| `track-tool-use.py` | Any tool use | Log activity, count turns |
| `periodic-reground.py` | Every 7 turns | Re-inject context summary |
| `verify-after-green.py` | Tests pass | Trigger Phase 9 |

---

## File Structure

```
@hustle-together/api-dev-tools v3.6.0
â”‚
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ cli.js                         # NPX installer (verifies 18 hooks)
â”‚
â”œâ”€â”€ commands/                          # 24 slash commands
â”‚   â”œâ”€â”€ api-create.md                  # Main 12-phase workflow
â”‚   â”œâ”€â”€ api-interview.md               # Structured interview
â”‚   â”œâ”€â”€ api-research.md                # Adaptive research
â”‚   â”œâ”€â”€ api-verify.md                  # Manual verification
â”‚   â”œâ”€â”€ api-env.md                     # Environment check
â”‚   â”œâ”€â”€ api-status.md                  # Progress tracking
â”‚   â”œâ”€â”€ red.md, green.md, refactor.md  # TDD commands
â”‚   â”œâ”€â”€ cycle.md                       # Full TDD cycle
â”‚   â”œâ”€â”€ commit.md, pr.md               # Git operations
â”‚   â””â”€â”€ ... (13 more)
â”‚
â”œâ”€â”€ hooks/                             # 18 Python enforcement hooks
â”‚   â”‚
â”‚   â”‚ # Session lifecycle
â”‚   â”œâ”€â”€ session-startup.py             # SessionStart â†’ inject context
â”‚   â”‚
â”‚   â”‚ # User prompt processing
â”‚   â”œâ”€â”€ enforce-external-research.py   # UserPromptSubmit â†’ detect API terms
â”‚   â”‚
â”‚   â”‚ # PreToolUse (Write/Edit) - BLOCKING
â”‚   â”œâ”€â”€ enforce-disambiguation.py      # Phase 0
â”‚   â”œâ”€â”€ enforce-scope.py               # Phase 1
â”‚   â”œâ”€â”€ enforce-research.py            # Phase 2
â”‚   â”œâ”€â”€ enforce-interview.py           # Phase 3
â”‚   â”œâ”€â”€ enforce-deep-research.py       # Phase 4
â”‚   â”œâ”€â”€ enforce-schema.py              # Phase 5
â”‚   â”œâ”€â”€ enforce-environment.py         # Phase 6
â”‚   â”œâ”€â”€ enforce-tdd-red.py             # Phase 7
â”‚   â”œâ”€â”€ verify-implementation.py       # Phase 8 helper
â”‚   â”œâ”€â”€ enforce-verify.py              # Phase 9
â”‚   â”œâ”€â”€ enforce-refactor.py            # Phase 10
â”‚   â”œâ”€â”€ enforce-documentation.py       # Phase 11
â”‚   â”‚
â”‚   â”‚ # PostToolUse - TRACKING
â”‚   â”œâ”€â”€ track-tool-use.py              # Log all tool usage
â”‚   â”œâ”€â”€ periodic-reground.py           # Re-inject context every 7 turns
â”‚   â”œâ”€â”€ verify-after-green.py          # Trigger Phase 9 after tests pass
â”‚   â”‚
â”‚   â”‚ # Stop - BLOCKING
â”‚   â””â”€â”€ api-workflow-check.py          # Block completion if incomplete
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ api-dev-state.json             # State file (12 phases + phase_exit_confirmed)
â”‚   â”œâ”€â”€ settings.json                  # Hook registrations
â”‚   â”œâ”€â”€ research-index.json            # Research freshness tracking
â”‚   â””â”€â”€ CLAUDE-SECTION.md              # CLAUDE.md injection
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate-test-manifest.ts      # Parse tests â†’ manifest (NO LLM)
â”‚   â”œâ”€â”€ extract-parameters.ts          # Extract Zod params
â”‚   â””â”€â”€ collect-test-results.ts        # Run tests â†’ results
â”‚
â””â”€â”€ package.json                       # v3.5.0
```

---

## State File Structure (v3.6.0)

```json
{
  "version": "3.0.0",
  "endpoint": "brandfetch",
  "session_id": "abc123",
  "turn_count": 47,
  "phases": {
    "disambiguation": {
      "status": "complete",
      "user_question_asked": true,
      "user_selected": "Brandfetch REST API",
      "phase_exit_confirmed": true,
      "last_question_type": "exit_confirmation"
    },
    "scope": {
      "status": "complete",
      "confirmed": true,
      "phase_exit_confirmed": true
    },
    "research_initial": {
      "status": "complete",
      "sources": ["context7", "websearch:brandfetch-api", "websearch:rate-limits"],
      "phase_exit_confirmed": true
    },
    "interview": {
      "status": "complete",
      "structured_question_count": 5,
      "decisions": {
        "response_format": "json_with_urls",
        "caching": "24h",
        "error_handling": "return_objects",
        "rate_limiting": "expose_headers",
        "assets": ["logos", "colors"]
      },
      "phase_exit_confirmed": true
    },
    "research_deep": {
      "status": "complete",
      "proposed_searches": ["error-format", "rate-headers", "auth"],
      "approved_searches": ["error-format", "rate-headers", "auth"],
      "executed_searches": ["error-format", "rate-headers", "auth"],
      "phase_exit_confirmed": true
    },
    "schema_creation": {
      "status": "complete",
      "schema_file": "src/lib/schemas/brandfetch.ts",
      "phase_exit_confirmed": true
    },
    "environment_check": {
      "status": "complete",
      "keys_found": ["BRANDFETCH_API_KEY"],
      "phase_exit_confirmed": true
    },
    "tdd_red": {
      "status": "complete",
      "test_file": "src/app/api/v2/brandfetch/__tests__/route.test.ts",
      "test_count": 9,
      "phase_exit_confirmed": true
    },
    "tdd_green": {
      "status": "complete",
      "all_tests_passing": true
    },
    "verify": {
      "status": "complete",
      "gaps_found": 2,
      "gaps_fixed": 0,
      "intentional_omissions": ["include_fonts", "webhook"],
      "phase_exit_confirmed": true
    },
    "tdd_refactor": {
      "status": "complete",
      "phase_exit_confirmed": true
    },
    "documentation": {
      "status": "complete",
      "manifest_updated": true,
      "research_cached": true,
      "phase_exit_confirmed": true
    }
  },
  "reground_history": [
    { "turn": 7, "phase": "interview" },
    { "turn": 14, "phase": "tdd_red" },
    { "turn": 21, "phase": "tdd_green" }
  ]
}
```

---

## Installation

```bash
# Install in your project
npx @hustle-together/api-dev-tools --scope=project

# Team-wide auto-installation (add to package.json)
{
  "scripts": {
    "postinstall": "npx @hustle-together/api-dev-tools --scope=project"
  }
}
```

### Requirements

- **Node.js** 14.0.0+
- **Python 3** (for enforcement hooks)
- **Claude Code** CLI tool

---

## What's New in v3.6.0

### Exit Code 2 for Stronger Enforcement

**Problem:** JSON `permissionDecision: "deny"` blocks actions but Claude may continue normally. We needed a way to force Claude to **actively respond** to the error.

**Solution:** All blocking hooks now use `sys.exit(2)` with stderr messages instead of JSON deny:

```python
# Before (passive - Claude sees reason but may continue)
print(json.dumps({"permissionDecision": "deny", "reason": "..."}))
sys.exit(0)

# After (active - forces Claude into feedback loop)
print("BLOCKED: ...", file=sys.stderr)
sys.exit(2)
```

**Upgraded hooks:**
- `enforce-research.py` - Forces `/api-research` before implementation
- `enforce-interview.py` - Forces structured interview completion
- `api-workflow-check.py` - Forces all phases complete before stopping
- `verify-implementation.py` - Forces fix of critical mismatches

From [Anthropic's docs](https://code.claude.com/docs/en/hooks):
> "Exit code 2 creates a feedback loop directly to Claude. Claude sees your error message. **Claude adjusts. Claude tries something different.**"

---

## What's New in v3.5.0

### `phase_exit_confirmed` Enforcement

**Problem:** Claude was calling `AskUserQuestion` but immediately self-answering without waiting for user input.

**Solution:** Every phase now requires:
1. An "exit confirmation" question (detected by patterns like "proceed", "ready", "confirm")
2. An affirmative user response (detected by patterns like "yes", "approve", "looks good")
3. Both conditions set `phase_exit_confirmed = true` in state

```python
# In track-tool-use.py
def _detect_question_type(question_text, options):
    """Detects: 'exit_confirmation', 'data_collection', 'clarification'"""
    exit_patterns = ["proceed", "continue", "ready to", "approve", "confirm", ...]

def _is_affirmative_response(response, options):
    """Checks for: 'yes', 'proceed', 'approve', 'confirm', 'ready', ..."""
```

---

## Links

- **NPM:** https://www.npmjs.com/package/@hustle-together/api-dev-tools
- **GitHub:** https://github.com/hustle-together/api-dev-tools
- **Demo:** https://hustle-together.github.io/api-dev-tools/demo/

---

## License

MIT

---

**Made with care for API developers using Claude Code**

*"Disambiguate, research, interview, verify, repeat"*
